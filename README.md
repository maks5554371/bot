# üéÇ –ê–≤—Ç–æ–∫–≤–µ—Å—Ç ‚Äî –î–µ–Ω—å –†–æ–∂–¥–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∞–≤—Ç–æ–∫–≤–µ—Å—Ç–∞: Telegram-–±–æ—Ç –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ + –≤–µ–±-–∞–¥–º–∏–Ω–∫–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
[Telegram] ‚Üî [Python Bot :8081] ‚Üí REST API ‚Üí [Node.js :3001] ‚Üî [MongoDB :27017]
                                                  ‚Üï Socket.IO
                                          [React Admin :80/5173]
```

| –°–µ—Ä–≤–∏—Å | –°—Ç–µ–∫ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------|------------|
| **backend** | Node.js, Express, Mongoose, Socket.IO | REST API, —Ä–∞–±–æ—Ç–∞ —Å –ë–î, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram |
| **bot** | Python, aiogram 3 | –ü—Ä–∏—ë–º —Å–æ–æ–±—â–µ–Ω–∏–π/—Ñ–æ—Ç–æ/–≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ –æ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ |
| **frontend** | React, Vite, Tailwind CSS, Leaflet | –í–µ–±-–∞–¥–º–∏–Ω–∫–∞ |
| **mongo** | MongoDB 7 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
–ù–∞–ø–∏—à–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram ‚Üí `/newbot` ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω.

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env ‚Äî –≤–ø–∏—à–∏—Ç–µ BOT_TOKEN –∏ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏
```

### 3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
```bash
docker-compose up --build -d
```

### 4. –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞
```bash
docker exec quest-backend node src/seed.js
```

### 5. –ì–æ—Ç–æ–≤–æ!
- **–ê–¥–º–∏–Ω–∫–∞:** http://localhost (–ª–æ–≥–∏–Ω: admin / admin123)
- **API:** http://localhost:3001/api/health
- **–ë–æ—Ç:** –Ω–∞–ø–∏—à–∏—Ç–µ `/start` –≤–∞—à–µ–º—É –±–æ—Ç—É –≤ Telegram

---

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Docker)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 20+
- Python 3.12+
- MongoDB 7+ (–∑–∞–ø—É—â–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–æ)

### Backend
```bash
cd backend
npm install
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ MONGO_URI –≤ .env –Ω–∞ mongodb://localhost:27017/quest
npm run seed   # —Å–æ–∑–¥–∞—Ç—å admin
npm run dev    # –∑–∞–ø—É—Å–∫ —Å nodemon
```

### Bot
```bash
cd bot
pip install -r requirements.txt
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ BACKEND_URL –≤ .env –Ω–∞ http://localhost:3001
python main.py
```

### Frontend
```bash
cd frontend
npm install
npm run dev    # http://localhost:5173
```

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–≤–µ—Å—Ç–∞
1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É ‚Üí **–ö–≤–µ—Å—Ç** ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ –∫–≤–µ—Å—Ç
2. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ (—Ç–µ–∫—Å—Ç + –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã + —Ä–∞–¥–∏—É—Å)
3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–≤–µ—Å—Ç

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
4. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–∏—à—É—Ç `/start` –±–æ—Ç—É ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
5. –í –∞–¥–º–∏–Ω–∫–µ ‚Üí **–£—á–∞—Å—Ç–Ω–∏–∫–∏** ‚Üí –Ω–∞–∑–Ω–∞—á—å—Ç–µ –∫–∞–∂–¥–æ–≥–æ –≤ –∫–æ–º–∞–Ω–¥—É (–º–∞—à–∏–Ω—É)

### –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ
6. **–ö–æ–º–∞–Ω–¥—ã** ‚Üí –Ω–∞–∑–Ω–∞—á—å—Ç–µ –∫–≤–µ—Å—Ç –∫–æ–º–∞–Ω–¥–µ ‚Üí –Ω–∞–∂–º–∏—Ç–µ üöÄ –°—Ç–∞—Ä—Ç
7. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–µ—Ä–≤—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É
8. –û–Ω–∏ –µ–¥—É—Ç –Ω–∞ —Ç–æ—á–∫—É, –¥–µ–ª–∞—é—Ç —Ñ–æ—Ç–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –±–æ—Ç—É
9. **–§–æ—Ç–æ** ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ç–æ ‚Üí ‚úÖ –û–¥–æ–±—Ä–∏—Ç—å (–∞–≤—Ç–æ-–æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–ª–µ–¥—É—é—â—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É)
10. –ò–ª–∏ –≤—Ä—É—á–Ω—É—é: **–ö–æ–º–∞–Ω–¥—ã** ‚Üí ‚û°Ô∏è –î–∞–ª–µ–µ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ö–∞—Ä—Ç–∞** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–µ—Å–ª–∏ –æ–Ω–∏ –ø–æ–¥–µ–ª–∏–ª–∏—Å—å –≥–µ–æ–ø–æ–∑–∏—Ü–∏–µ–π)
- **–î–∞—à–±–æ—Ä–¥** ‚Äî –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å, pending —Ñ–æ—Ç–æ, –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏
- **–ß–∞—Ç** ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –ª—é–±–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É –∏–∑ –∞–¥–º–∏–Ω–∫–∏

---

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| POST | `/api/auth/login` | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞ |
| GET | `/api/dashboard` | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| GET/PATCH | `/api/users/:id` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ |
| GET/POST/PATCH/DELETE | `/api/teams/:id` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞–º–∏ |
| POST | `/api/teams/:id/members` | –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –∫–æ–º–∞–Ω–¥—É |
| GET/POST/PATCH/DELETE | `/api/quests/:id` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞–º–∏ |
| GET/PATCH | `/api/photos/:id` | –ü—Ä–æ—Å–º–æ—Ç—Ä/–∞–ø–ø—Ä—É–≤ —Ñ–æ—Ç–æ |
| GET | `/api/photos/:id/image` | –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ –∏–∑ Telegram |
| POST/GET | `/api/messages` | –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π |
| POST | `/api/clues/send-first/:teamId` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É |
| POST | `/api/clues/send-next/:teamId` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É |
| POST | `/api/bot/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–æ—Ç –±–æ—Ç–∞) |
| POST | `/api/bot/photo` | –§–æ—Ç–æ-–æ—Ç—á—ë—Ç (–æ—Ç –±–æ—Ç–∞) |
| POST | `/api/bot/location` | –ì–µ–æ–ø–æ–∑–∏—Ü–∏—è (–æ—Ç –±–æ—Ç–∞) |

## Socket.IO —Å–æ–±—ã—Ç–∏—è

| –°–æ–±—ã—Ç–∏–µ | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-------------|----------|
| `new_user` | ‚Üí frontend | –ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| `new_photo` | ‚Üí frontend | –ù–æ–≤—ã–π —Ñ–æ—Ç–æ-–æ—Ç—á—ë—Ç |
| `location_update` | ‚Üí frontend | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ |
| `new_message` | ‚Üí frontend | –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| `photo_reviewed` | ‚Üí frontend | –§–æ—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ |
| `clue_sent` | ‚Üí frontend | –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ |
| `team_finished` | ‚Üí frontend | –ö–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞ –∫–≤–µ—Å—Ç |
